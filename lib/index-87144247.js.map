{"version":3,"file":"index-87144247.js","sources":["../node_modules/@github-docs/frontmatter/index.js"],"sourcesContent":["const matter = require('gray-matter')\nconst revalidator = require('revalidator')\nconst { difference, intersection } = require('lodash')\n\nfunction frontmatter (markdown, opts = { validateKeyNames: false, validateKeyOrder: false }) {\n  const schema = opts.schema || { properties: {} }\n  const filepath = opts.filepath || null\n\n  let content, data\n  let errors = []\n\n  try {\n    ({ content, data } = matter(markdown))\n  } catch (e) {\n    const defaultReason = 'invalid frontmatter entry'\n\n    const reason = e.reason\n      // make this common error message a little easier to understand\n      ? e.reason.startsWith('can not read a block mapping entry;') ? defaultReason : e.reason\n      : defaultReason\n\n    const error = {\n      reason,\n      message: 'YML parsing error!'\n    }\n\n    if (filepath) error.filepath = filepath\n    errors.push(error)\n    return { errors }\n  }\n\n  const allowedKeys = Object.keys(schema.properties)\n  const existingKeys = Object.keys(data)\n  const expectedKeys = intersection(allowedKeys, existingKeys)\n\n  ;({ errors } = revalidator.validate(data, schema))\n\n  // add filepath property to each error object\n  if (errors.length && filepath) {\n    errors = errors.map(error => Object.assign(error, { filepath }))\n  }\n\n  // validate key names\n  if (opts.validateKeyNames) {\n    const invalidKeys = difference(existingKeys, allowedKeys)\n    invalidKeys.forEach(key => {\n      const error = {\n        property: key,\n        message: `not allowed. Allowed properties are: ${allowedKeys.join(', ')}`\n      }\n      if (filepath) error.filepath = filepath\n      errors.push(error)\n    })\n  }\n\n  // validate key order\n  if (opts.validateKeyOrder && existingKeys.join('') !== expectedKeys.join('')) {\n    const error = {\n      property: 'keys',\n      message: `keys must be in order. Current: ${existingKeys.join(',')}; Expected: ${expectedKeys.join(',')}`\n    }\n    if (filepath) error.filepath = filepath\n    errors.push(error)\n  }\n\n  return { content, data, errors }\n}\n\n// Expose gray-matter's underlying stringify method for joining a parsed\n// frontmatter object and a markdown string back into a unified string\n//\n// stringify('some string', {some: 'frontmatter'})\nfrontmatter.stringify = matter.stringify\n\nmodule.exports = frontmatter\n"],"names":["matter","require","revalidator","difference","intersection","frontmatter","markdown","opts","validateKeyNames","validateKeyOrder","schema","properties","filepath","content","data","errors","e","defaultReason","reason","startsWith","error","message","push","allowedKeys","Object","keys","existingKeys","expectedKeys","validate","length","map","assign","invalidKeys","forEach","key","property","join","stringify","module","exports"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,aAAD,CAA3B;;AACA,MAAM;AAAEE,EAAAA,UAAF;AAAcC,EAAAA;AAAd,IAA+BH,OAAO,CAAC,QAAD,CAA5C;;AAEA,SAASI,WAAT,CAAsBC,QAAtB,EAAgCC,IAAI,GAAG;AAAEC,EAAAA,gBAAgB,EAAE,KAApB;AAA2BC,EAAAA,gBAAgB,EAAE;AAA7C,CAAvC,EAA6F;AAC3F,QAAMC,MAAM,GAAGH,IAAI,CAACG,MAAL,IAAe;AAAEC,IAAAA,UAAU,EAAE;AAAd,GAA9B;AACA,QAAMC,QAAQ,GAAGL,IAAI,CAACK,QAAL,IAAiB,IAAlC;AAEA,MAAIC,OAAJ,EAAaC,IAAb;AACA,MAAIC,MAAM,GAAG,EAAb;;AAEA,MAAI;AACF,KAAC;AAAEF,MAAAA,OAAF;AAAWC,MAAAA;AAAX,QAAoBd,MAAM,CAACM,QAAD,CAA3B;AACD,GAFD,CAEE,OAAOU,CAAP,EAAU;AACV,UAAMC,aAAa,GAAG,2BAAtB;AAEA,UAAMC,MAAM,GAAGF,CAAC,CAACE,MAAF;AAAA,MAEXF,CAAC,CAACE,MAAF,CAASC,UAAT,CAAoB,qCAApB,IAA6DF,aAA7D,GAA6ED,CAAC,CAACE,MAFpE,GAGXD,aAHJ;AAKA,UAAMG,KAAK,GAAG;AACZF,MAAAA,MADY;AAEZG,MAAAA,OAAO,EAAE;AAFG,KAAd;AAKA,QAAIT,QAAJ,EAAcQ,KAAK,CAACR,QAAN,GAAiBA,QAAjB;AACdG,IAAAA,MAAM,CAACO,IAAP,CAAYF,KAAZ;AACA,WAAO;AAAEL,MAAAA;AAAF,KAAP;AACD;;AAED,QAAMQ,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYf,MAAM,CAACC,UAAnB,CAApB;AACA,QAAMe,YAAY,GAAGF,MAAM,CAACC,IAAP,CAAYX,IAAZ,CAArB;AACA,QAAMa,YAAY,GAAGvB,YAAY,CAACmB,WAAD,EAAcG,YAAd,CAAjC;AAEC,GAAC;AAAEX,IAAAA;AAAF,MAAab,WAAW,CAAC0B,QAAZ,CAAqBd,IAArB,EAA2BJ,MAA3B,CAAd,EA/B0F;;AAkC3F,MAAIK,MAAM,CAACc,MAAP,IAAiBjB,QAArB,EAA+B;AAC7BG,IAAAA,MAAM,GAAGA,MAAM,CAACe,GAAP,CAAWV,KAAK,IAAII,MAAM,CAACO,MAAP,CAAcX,KAAd,EAAqB;AAAER,MAAAA;AAAF,KAArB,CAApB,CAAT;AACD,GApC0F;;;AAuC3F,MAAIL,IAAI,CAACC,gBAAT,EAA2B;AACzB,UAAMwB,WAAW,GAAG7B,UAAU,CAACuB,YAAD,EAAeH,WAAf,CAA9B;AACAS,IAAAA,WAAW,CAACC,OAAZ,CAAoBC,GAAG,IAAI;AACzB,YAAMd,KAAK,GAAG;AACZe,QAAAA,QAAQ,EAAED,GADE;AAEZb,QAAAA,OAAO,EAAG,wCAAuCE,WAAW,CAACa,IAAZ,CAAiB,IAAjB,CAAuB;AAF5D,OAAd;AAIA,UAAIxB,QAAJ,EAAcQ,KAAK,CAACR,QAAN,GAAiBA,QAAjB;AACdG,MAAAA,MAAM,CAACO,IAAP,CAAYF,KAAZ;AACD,KAPD;AAQD,GAjD0F;;;AAoD3F,MAAIb,IAAI,CAACE,gBAAL,IAAyBiB,YAAY,CAACU,IAAb,CAAkB,EAAlB,MAA0BT,YAAY,CAACS,IAAb,CAAkB,EAAlB,CAAvD,EAA8E;AAC5E,UAAMhB,KAAK,GAAG;AACZe,MAAAA,QAAQ,EAAE,MADE;AAEZd,MAAAA,OAAO,EAAG,mCAAkCK,YAAY,CAACU,IAAb,CAAkB,GAAlB,CAAuB,eAAcT,YAAY,CAACS,IAAb,CAAkB,GAAlB,CAAuB;AAF5F,KAAd;AAIA,QAAIxB,QAAJ,EAAcQ,KAAK,CAACR,QAAN,GAAiBA,QAAjB;AACdG,IAAAA,MAAM,CAACO,IAAP,CAAYF,KAAZ;AACD;;AAED,SAAO;AAAEP,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA;AAAjB,GAAP;AACD;AAGD;AACA;AACA;;;AACAV,WAAW,CAACgC,SAAZ,GAAwBrC,MAAM,CAACqC,SAA/B;AAEAC,MAAM,CAACC,OAAP,GAAiBlC,WAAjB"}